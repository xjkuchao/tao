//! MPEG-4 Part 2 常量表
//!
//! 包含量化矩阵, 扫描表, DC scaler, escape 模式表, IDCT 常量等.

/// 标准 MPEG-4 量化矩阵 (Intra)
pub(super) const STD_INTRA_QUANT_MATRIX: [u8; 64] = [
    8, 16, 19, 22, 26, 27, 29, 34, 16, 16, 22, 24, 27, 29, 34, 37, 19, 22, 26, 27, 29, 34, 34, 38,
    22, 22, 26, 27, 29, 34, 37, 40, 22, 26, 27, 29, 32, 35, 40, 48, 26, 27, 29, 32, 35, 40, 48, 58,
    26, 27, 29, 34, 38, 46, 56, 69, 27, 29, 35, 38, 46, 56, 69, 83,
];

/// 标准 MPEG-4 量化矩阵 (Inter)
pub(super) const STD_INTER_QUANT_MATRIX: [u8; 64] = [
    16, 17, 18, 19, 20, 21, 22, 23, 17, 18, 19, 20, 21, 22, 23, 24, 18, 19, 20, 21, 22, 23, 24, 25,
    19, 20, 21, 22, 23, 24, 25, 26, 20, 21, 22, 23, 24, 25, 26, 27, 21, 22, 23, 24, 25, 26, 27, 28,
    22, 23, 24, 25, 26, 27, 28, 29, 23, 24, 25, 26, 27, 28, 29, 30,
];

/// 标准 8x8 zigzag 扫描顺序
pub(super) const ZIGZAG_SCAN: [usize; 64] = [
    0, 1, 8, 16, 9, 2, 3, 10, 17, 24, 32, 25, 18, 11, 4, 5, 12, 19, 26, 33, 40, 48, 41, 34, 27, 20,
    13, 6, 7, 14, 21, 28, 35, 42, 49, 56, 57, 50, 43, 36, 29, 22, 15, 23, 30, 37, 44, 51, 58, 59,
    52, 45, 38, 31, 39, 46, 53, 60, 61, 54, 47, 55, 62, 63,
];

/// 水平 alternate 扫描
#[allow(dead_code)]
pub(super) const ALTERNATE_HORIZONTAL_SCAN: [usize; 64] = [
    0, 1, 2, 3, 8, 9, 16, 17, 10, 11, 4, 5, 6, 7, 15, 14, 13, 12, 19, 18, 24, 25, 32, 33, 26, 27,
    20, 21, 22, 23, 28, 29, 30, 31, 34, 35, 40, 41, 48, 49, 42, 43, 36, 37, 38, 39, 44, 45, 46, 47,
    50, 51, 56, 57, 58, 59, 52, 53, 54, 55, 60, 61, 62, 63,
];

/// 垂直 alternate 扫描
#[allow(dead_code)]
pub(super) const ALTERNATE_VERTICAL_SCAN: [usize; 64] = [
    0, 8, 16, 24, 1, 9, 2, 10, 17, 25, 32, 40, 48, 56, 41, 33, 26, 18, 3, 11, 4, 12, 19, 27, 34,
    42, 49, 57, 50, 58, 35, 43, 20, 28, 5, 13, 6, 14, 21, 29, 36, 44, 51, 59, 52, 60, 37, 45, 22,
    30, 7, 15, 23, 31, 38, 46, 53, 61, 54, 62, 39, 47, 55, 63,
];

/// DC Scaler 查找表 (亮度), 索引为 quant (0-31)
pub(super) const DC_SCALER_Y: [u8; 32] = [
    0, 8, 8, 8, 8, 10, 12, 14, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32,
    34, 36, 38, 40, 42, 44, 46,
];

/// DC Scaler 查找表 (色度), 索引为 quant (0-31)
pub(super) const DC_SCALER_C: [u8; 32] = [
    0, 8, 8, 8, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28,
    29, 30, 31, 32, 34, 36, 38,
];

/// Chroma MV 舍入表 (1MV 模式)
pub(super) const ROUNDTAB_79: [i16; 4] = [0, 0, 0, 1];

/// Chroma MV 舍入表 (4MV 模式)
pub(super) const ROUNDTAB_76: [i16; 16] = [0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1];

// Escape 模式表

pub(super) const INTER_MAX_LEVEL_LAST0: [u8; 27] = [
    12, 6, 4, 3, 3, 3, 3, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
];
pub(super) const INTER_MAX_LEVEL_LAST1: [u8; 41] = [
    3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 1,
];
pub(super) const INTER_MAX_RUN_LAST0: [u8; 13] = [0, 26, 10, 6, 2, 1, 1, 0, 0, 0, 0, 0, 0];
pub(super) const INTER_MAX_RUN_LAST1: [u8; 4] = [0, 40, 1, 0];

pub(super) const INTRA_MAX_LEVEL_LAST0: [u8; 15] = [27, 10, 5, 4, 3, 3, 3, 3, 2, 2, 1, 1, 1, 1, 1];
pub(super) const INTRA_MAX_LEVEL_LAST1: [u8; 21] = [
    8, 3, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
];
pub(super) const INTRA_MAX_RUN_LAST0: [u8; 28] = [
    0, 14, 9, 7, 3, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
];
pub(super) const INTRA_MAX_RUN_LAST1: [u8; 9] = [0, 20, 6, 1, 0, 0, 0, 0, 0];

/// dquant 映射
pub(super) const DQUANT_TABLE: [i32; 4] = [-1, -2, 1, 2];

/// intra_dc_vlc_thr 阈值: 索引 0-7, 值为 quant 阈值
pub(super) const INTRA_DC_THRESHOLD: [u32; 8] = [32, 13, 15, 17, 19, 21, 23, 0];

// 整数 IDCT 常量 (Chen-Wang 算法)
pub(super) const W1: i32 = 2841;
pub(super) const W2: i32 = 2676;
pub(super) const W3: i32 = 2408;
pub(super) const W5: i32 = 1609;
pub(super) const W6: i32 = 1108;
pub(super) const W7: i32 = 565;
