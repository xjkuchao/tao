# 代码组织与文件管理

## 代码组织原则

- 单个函数不超过 50 行
- 按功能分类组织代码, 遵循现有 crate 划分和目录结构
- 复杂模块拆分为多个子模块, 每个子模块职责单一
- 公共类型集中定义在对应 crate 中
- 新增编解码器 → `tao-codec` 下对应子目录
- 新增容器格式 → `tao-format` 下对应子目录

## 执行计划管理

- AI 制定执行计划时, 必须将计划文件写入 `plans/` 目录
- 命名格式: `{功能模块}_{任务描述}.md` (如 `h264_decoder_improvement.md`)
- 计划内容应包含: 任务背景/目标, 详细执行步骤, 预期产出, 依赖项, 验收标准
- 支持断点续执行, 标记已完成步骤
- 详细到不同 AI 工具可基于同一计划继续执行

## 根目录文件管理

**严格禁止**在项目根目录下随意创建新文件.

### 允许的根目录文件

- 项目配置: `Cargo.toml`, `.rustfmt.toml`, `.gitignore`
- 核心文档: `README.md`
- License: `LICENSE`, `LICENSE-MIT`, `LICENSE-APACHE`

### 文件存放位置

| 文件类型 | 目录 |
|---------|------|
| 执行计划 | `plans/` |
| 技术文档 | `docs/` |
| 示例代码 | `examples/` |
| 样本清单 | `samples/` |
| 测试数据/临时文件 | `data/` |
