# 质量与规范

## 日志规范

- 使用 `tracing` 宏；库只打点不初始化后端；可执行文件负责初始化  
- 控制台输出固定 debug 级别、带颜色、输出到 stdout  
- 文件输出按配置可变级别，无颜色，支持按日期切换/压缩/清理  
- 日志目录 `logs/`（Git 仅保留 `.gitkeep`）与命名前缀约定  
- 提供初始化示例与级别使用建议；AI 调试优先查看日志文件

---

## 安全规范

- 禁止硬编码敏感信息；使用环境变量/配置管理  
- `.gitignore` 必须包含构建产物与临时文件类型  
- FFI `unsafe` 必须详述安全性；指针检查；所有权与生命周期正确

---

## 代码提交规范（始终生效）

- 提交信息前缀：feat/fix/refactor/style/chore/test/docs（使用中文描述）  
- 提交前强制检查：`cargo fmt --check` → `cargo clippy -D warnings` → `cargo check` → `cargo test`  
- 0 警告容忍；禁用随意 `#[allow(...)]`  
- 完成功能且检查通过后进行提交，范围精确、信息准确

---

## 代码质量要求（始终生效）

- 不允许编译错误或 Clippy 警告；未使用的 import/变量/函数需删除或下划线前缀  
- 避免魔法常量与重复代码；函数保持简洁、复杂逻辑拆分  
- 自查清单：imports/重复/魔法常量/风格/错误处理/API 文档/复杂逻辑注释
